# HuaweiPrograming
## 牛客网华为机试题

## C++面试题---基础概念篇  
面试C++程序员的时候一般都是三板斧，先是基础问答，然后一顿虚函数、虚函数表、纯虚函数、抽象类、虚函数和析构函数、虚函数和构造函数。接着拷贝构造函数、操作符重载、下面是STL，最后是智能指针。  

- 1.C++和C相比最大的特点：  
1）面向对象：封装、继承、多态  
2）引入引用代替指针  
3）const/inline/template 替代宏常量  
4）namespace解决重名问题  
5）STL提供高效的数据结构和算法  

- 你知道虚函数吗  
实现多态所必须，父类类型的指针指向子类的实例，执行的时候会执行子类中定义的函数  

- 析构函数可以是虚函数吗  
如果有子类的话，析构函数必须是虚函数，否则析构子类类型的指针时，析构函数有可能不会被调用到  

- 多态的实现  
简而言之，编译器根据虚函数表找到恰当的虚函数。对于一个父类的对象指针类型变量，如果给他赋父类对象的指针，那么他就调用父类中的函数，如果给他赋子类对象的指针，他就调用子类中的函数。函数执行之前查表  

- 虚函数表是针对类还是针对对象的  
虚函数表是针对类的，一个类的所有对象的虚函数表都是一样的  

- 纯虚函数和虚函数有什么区别  
纯虚函数就是定义了一个虚函数但并没有实现，原型后面加“=0”。包含纯虚函数的类都是抽象类，不能生成实例  

- 构造函数可以是虚函数吗  
每个对象的虚函数表指针是在构造函数中初始化的，因为构造函数没执行完，所以虚函数表指针还没初始化好，构造函数的虚函数不起作用  

- 构造函数可以调用虚函数吗  
就算调用虚函数也不起作用，调用虚函数同调用一般的成员函数一样  

- 析构函数中可以调用虚函数吗  
析构函数中调用虚函数也不起作用，调用虚函数同调用一般的成员函数一样，析构函数的顺序是先派生类后基类，有可能内容已经析构没了，所以虚函数不起作用  

- 虚继承和虚基类  
虚继承是为了解决多重继承出现菱形继承时出现的问题。例如：类B、C分别继承了类A。类D多重继承类B和C的时候，类A中的数据就会在类D中存在多份。通过声明继承关系的时候加上virtual关键字可以实现虚继承。

## C++面试题---STL相关各种问题  
- 用过哪些容器  
最常用的容器就是：vector、list、map、hash_map等等  

- vector，list，deque的实现  
vector是一块连续内存，当空间不足了会再分配  
list是双向链表  
deque是双端队列可在头和尾部插入、删除元素  

- hashmap和map有什么区别  
一个是基于hash表实现，一个是基于红黑树实现  

- 红黑树有什么特性  

- STL仿函数和指针的差别  

- 配接器  

- 一元、二元仿函数  

## C++面试题---智能指针的原理和实现  
- 你知道智能指针吗？智能指针的原理  
智能指针是一个类，这个类的构造函数中传入一个普通指针，析构函数中释放传入的指针。智能指针的类都是栈上的对象，所以当函数（或程序）结束时会自动被释放  

- 最常用的智能指针  
1）std::auto_ptr，有很多问题，不支持复制（拷贝构造函数）和赋值（operator =），但复制或赋值的时候不会提示出错，因为不能被复制，所以不能被放入容器中  
2）C++11引入的unique_ptr，也不支持复制和赋值，但比auto_ptr好，直接赋值会编译出错。实在想赋值的话，需要使用std::move  
例如：
```
std::unique_ptr<int> p1(new int(5));
std::unique_ptr<int> p2 = p1; //编译会出错
std::unique_ptr<int> p3 = std::move(p1); //转移所有权，现在那块内存归p3所有，p1称为无效指针
```  
3)C++11或boost的shared_ptr，基于引用计数的智能指针，可随意赋值，知道内存的引用计数为0的时候这个内存会被释放  

4）C++11或boost的weak_ptr，弱引用，引用计数有一个问题就是互相引用形成环，这样两个指针指向的内存都无法释放。需要手动打破循环引用或使用weak_ptr。顾名思义，weak_ptr是一个弱引用，只引用，不计数。如果一块内存被shared_ptr和weak_ptr同时引用，当所有shared_ptr析构了之后，不管还有没有weak_ptr引用该内存，内存也会被释放掉。所以weak_ptr不保证它所指向的内存一定是有效的，在使用之前需要检查weak_ptr是否为空指针。

- 智能指针的实现  
下面是一个机遇引用计数的智能指针的实现，需要实现构造，析构，拷贝构造，```重载 =，*，->```。
